---
import CVLayout from '../layouts/CVLayout.astro';
import ExperienceCard from '../components/ExperienceCard.astro';
import GridSection from '../components/mdx/GridSection.astro';
import { cvData } from '../data/cv.ts';
import { siteConfig } from '../config/site.ts';

const { title, description } = siteConfig;
---

<CVLayout title={title} description={description}>
  <div class="pl-4 pr-4 sm:pl-6 sm:pr-6 lg:pl-page lg:pr-8 pt-6 sm:pt-8 pb-12 sm:pb-16">
    <header class="mb-section" role="banner">
      <h1 class="text-hero text-cv-content font-semibold" id="main-title">{cvData.name}</h1>
    </header>

    <section aria-labelledby="overview-heading">
      <h2 id="overview-heading" class="sr-only">Informations générales</h2>
      <GridSection>
        <div class="relative p-6 pattern-boxes sh-alt rounded-sm">
          <h3 class="text-section text-cv-content font-semibold mb-4" id="education-section">Education</h3>
        <div class="space-y-4">
          {cvData.education.map((edu) => (
            <div>
              <span class="inline-flex items-center gap-1.5 px-3 py-1 text-sm bg-cv-accent text-white rounded-sm border border-cv-accent shadow-sm hover:bg-cv-accent/80 transition-colors mb-2">
                <iconify-icon icon="carbon:download" width="16" height="16"></iconify-icon>
                {edu.period}
              </span>
              <h3 class="flex gap-2 text-sm text-cv-content mb-1 items-center">
                <span class="shrink-0" aria-hidden="true">
                  <iconify-icon icon="carbon:server" width="24" height="24"></iconify-icon>
                </span>
                <span>{edu.title}</span>
              </h3>
              <p class="text-body text-cv-muted">{edu.institution}</p>
            </div>
          ))}
        </div>
      </div>

        <div class="relative p-6 pattern-boxes sh-alt rounded-sm">
          <h3 class="text-section text-cv-content font-semibold mb-4" id="contact-section">Contact Info</h3>
        <div class="space-y-4">
          <div>
            <p class="text-body text-cv-muted">Email: {cvData.contact.email}</p>
          </div>
          <div>
            <p class="text-body text-cv-muted">Portfolio: <a href={cvData.contact.portfolio.url} class="text-cv-accent">{cvData.contact.portfolio.text}</a></p>
          </div>
          <div>
            <p class="text-body text-cv-muted">LinkedIn: {cvData.contact.linkedin}</p>
          </div>
          <div>
            <p class="text-body text-cv-muted">{cvData.contact.location}</p>
          </div>
        </div>
      </div>

        <div class="relative p-6 pattern-boxes sh-alt rounded-sm">
          <h3 class="text-section text-cv-content font-semibold mb-4" id="interests-section">Interests</h3>
        <div class="grid grid-cols-2 gap-x-12 gap-y-4">
          {cvData.interests.map((interest) => (
            <p class="text-body text-cv-muted">{interest}</p>
          ))}
        </div>
      </div>
      </GridSection>
    </section>

    <section class="mb-section" aria-labelledby="experience-section">
      <div class="flex items-baseline gap-4 mb-8">
        <h2 class="text-section text-cv-content font-semibold" id="experience-section">Experience</h2>
        <span class="text-body text-cv-muted" aria-label="10 ans d'expérience professionnelle">10+ years</span>
      </div>
      
      <div class="space-y-section">
        {cvData.experience.map((exp) => (
          <ExperienceCard
            company={exp.company}
            companyUrl={exp.companyUrl}
            role={exp.role}
            period={exp.period}
            current={exp.current}
            logo={exp.logo}
          >
            {exp.achievements.map((achievement) => (
              <li class="text-body text-cv-content flex">
                <span class="mr-3">•</span>
                <span>{achievement}</span>
              </li>
            ))}
          </ExperienceCard>
        ))}
      </div>
    </section>

    <section class="mb-section" aria-labelledby="skills-section">
      <div class="flex items-baseline gap-4 mb-8">
        <h2 class="text-section text-cv-content font-semibold" id="skills-section">Skills</h2>
        <span class="text-body text-cv-muted" aria-label="Expertise professionnelle">Professional expertise</span>
      </div>
      
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-4 sm:gap-6 lg:gap-section">
        {cvData.skills.map((skill) => (
          <ExperienceCard
            company={skill.title}
            role={skill.subtitle}
            period={skill.level}
            current={skill.current}
          >
            {skill.items.map((item) => (
              <li class="text-body text-cv-content flex">
                <span class="mr-3">•</span>
                <span>{item}</span>
              </li>
            ))}
          </ExperienceCard>
        ))}
      </div>
    </section>
  </div>   
</CVLayout>
